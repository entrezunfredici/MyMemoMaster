# ! This Apache2 file is NOT AUTOMATICALLY GENERATED or PUSHED IN PRODUCTION AUTOMATICALLY  
# ! It is just a reference that NEEDS TO FIT THE EXACT SERVER CONFIGURATION to ensure reproductibility

<VirtualHost *:80>
    ServerName my-memo-master.com
    ServerAlias www.my-memo-master.com
    Redirect permanent / https://my-memo-master.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName my-memo-master.com
    ServerAlias www.my-memo-master.com

    Protocols h2 http/1.1
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/my-memo-master.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/my-memo-master.com/privkey.pem

    <Location />
        ProxyPass http://localhost:5173/
        ProxyPassReverse http://localhost:5173/
    </Location>

    <Location /api>
        ProxyPass http://localhost:8000/
        ProxyPassReverse http://localhost:8000/
    </Location>

    <Location /pgadmin>
        ProxyPass http://localhost:32769/
        ProxyPassReverse http://localhost:32769/
    </Location>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>